{% extends "landing_content_base.html" %}
{% block content-panel %}

<link rel="stylesheet" href="/landing_static/css/landing-sjz.css" type="text/css">
<div class="wrapper">
	<div class="main">
        <div class="line">
        <div class="year">
            <h2>2014年<i></i></h2>
            <h1 class="title">微众分销平台更新日志</h1>
            
            <div class="list" style="min-height:700px">
                <ul class="noticeListView">
                </ul>
            </div>
        </div>
        </div>
	</div>
</div>
{% endblock %}
{% block js %}
<script id="notice-info-view" type="text/x-jquery-tmpl">
	{% verbatim %}
	<li class="cls highlight">
		
	
		    <p class="date">${notice.create_time}</p>
		
		
		    <p class="intro">${notice.title}</p>
		
		
		    <p class="version">&nbsp;</p>
		
		
		    <div class="more">
	
		
		    <p class="version">{{html notice.content}}</p>
		
		</div>
		
	</li>
	{% endverbatim %}
</script>
<script>
	var $container = $('.noticeListView');
	function getTemplate() {
		$('#notice-info-view').template('address-view-tmpl');
		return 'address-view-tmpl';
	}
 	W.getApi().call({
	     app: 'notice',
	     api: 'notice/get_land',
	     args: {},
	     scope: this,
	     success: function(data) {
	     	var notices = data.notices;
			for (var i=0; i<notices.length; i++){
				notices[i].create_time = notices[i].create_time.substr(5, 2) + '月' + notices[i].create_time.substr(8, 2);
				
				if (notices[i].create_time[0]==='0'){
					notices[i].create_time = notices[i].create_time.substr(1, 4);
				};
				notices[i].create_time += '日';
				var li = $.tmpl(getTemplate(), {'notice':notices[i]});
				$container.append(li);
			}
	     },
	     error: function(resp) {
	         var $li = $('<li>未获取到数据</li>');
	         $container.append($li);
	         // for (var i=0; i<=10; i++){
	         	 // var notice = {'content': 'content', 'title': 'title', 'create_time': 'create_time'}
		         // var html = $.tmpl(getTemplate(), {'notice':notice});
		         // $container.append(html);
	         // }
	        
	     }
    });

</script>

{% endblock %}
