{% extends "content_base_v2.html" %}
{% load common_tag %}
{% load project_filter %}
{% load account_filter %}

{% block content-panel %}
<div class="xui-termite-editPage xa-weixin-materialsPage">
    <div class="relative">
        <ul class="breadcrumb">
            <li>您当前所在位置</li>
            <li><a href="/new_weixin/outline/">首页</a></li>
            <li class="active">微站编辑</li>
        </ul>
    </div>
    <div id="simulator" class="xui-simulator-box fl"></div>
    <div id="rightPanel" class="fl xui-model">
    	<div class="xui-addModel pl20 pr20">
         <div class="xui-i-title">添加模块</div>
         <div class="xui-richHtml"><i class="xui-spriteBg"></i></div>  
         <div class="xui-product"><i class="xui-spriteBg"></i></div>  
         <div class="xui-productList"><i class="xui-spriteBg"></i></div>  
         <div class="xui-imgAdd"><i class="xui-spriteBg"></i></div>  
         <div class="xui-notice"><i class="xui-spriteBg"></i></div>  
         <div class="xui-title"><i class="xui-spriteBg"></i></div>  
         <div class="xui-textNav"><i class="xui-spriteBg"></i></div>  
         <div class="xui-imgNav"><i class="xui-spriteBg"></i></div>  
         <div class="xui-subsidiaryBlack"><i class="xui-spriteBg"></i></div>  
         <div class="xui-shopWindow"><i class="xui-spriteBg"></i></div>  
        </div>
    </div>
    <div id="componentPreview" class="clearfix">
        <div class="xui-componentPreview fl"></div>
        <div class="xui-componentControl fl"></div>
    </div>

    <div>
        <button class="xa-saveAllComponents">保存</button>
        <button class="">预览</button>
    </div>

</div>
{% endblock %}

{% block global_elements %}

{% endblock %}


{% block js %}
{% verbatim %}
<script id="weixin-realtime-message-view" type="text/x-jquery-tmpl">
</script>
{% endverbatim %}

<script type="text/javascript">
$(document).ready(function() {
    $(".xa-saveAllComponents").click(function(event) {
        //alert("hello");
        xlog("to save all components");
        // 遍历所有的components
    });
    var phone = new W.view.termite.EmbededPhoneView({
        el: '#simulator'
    });
    phone.render();

    // // TODO: 恢复components数据
    // var list = [];
    // var json = JSON.parse('{"cid":2, "pid":1, "components":[]}');
    // var blankBlock = new W.termite.BlankBlockComponent({
    //     el: '#componentPreview',
    //     model: json,
    // });
    // //blankBlock.render();
    // list.push(blankBlock);
    // _.each(list, function(component) {
    //     //component.render();
    //     xlog(JSON.stringify(component.toStore()));
    // });
});

</script>



{% endblock %}
