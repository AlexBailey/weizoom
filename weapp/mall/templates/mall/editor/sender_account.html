{% extends "content_base_v2.html" %}
{% load common_tag %}
{% load account_filter %}
{% block css %}
<style type="text/css">
	.xui-senderNav{
		display: block;
		border-bottom: 1px solid #ccc;
		height: 40px;
	}
	.xui-senderNav li{
		float: left;
		padding-left: 38px;
		padding-right: 38px;
		line-height: 40px;
	}
	.xui-senderNav li a{
		color: #000;
		font-size: 14px;
		text-decoration:none;
	}
</style>
{% endblock %}
{% block content-panel %}

<div class="xui-expiredTime-page" style="background: #eaeef6">
	<ul class="breadcrumb">
		<li>您当前所在位置</li>
		<li>
			<a href="mall/editor/edit_expired_time.html">订单管理</a>
		</li>
		<li class="active">所有订单</li>
	</ul>
	<div>
		<ul class="xui-senderNav">
		<li><a href="/mall2/sender_info_list">发件人信息</a></li>
		<li style="border-bottom: 3px solid #0088CC;"><a href="/mall2/sender_account">快递账号管理</a></li>
	</ul>
	</div>
	<div class="fr h40 lh40">注：需联系附近的快递网店，获取打印电子面单所需账号密码，顺丰、EMS可直接使用</div>
	<div
                data-ui-role="advanced-table"
                data-app="mall2"
                data-resource="sender_account"
                data-enable-paginator="true"
                data-template-id="#mall-orders-account"
                data-init-sort="-created_at"
                data-selectable = "false"
                data-user-webapp-id={{user.get_profile.webapp_id}}
            >
            div
   </div>
{% endblock %}

{% block js %}
{% verbatim %}
 <script id="mall-orders-account" type="text/x-jquery-tmpl">
	<table class="table">
		<thead>
			<tr class="xui-trHeight" style="background:#c9d1e4;">
				<th width="80">快递名称</th>
				<th width="80">账号</th>
				<th width="80">密码</th>				
			</tr>
		</thead>
		<tbody style="border: 1px solid #CCC;">
            {{each(i, accounts) items}}
                <tr data-id="${accounts.id}">
                   
                    <!--快递名称-->
                    <td>
                        <div name="">${accounts.name}</div>                                                
                    </td>
                    <!--账号-->
                    <td class="nowrap">
                    	{{if account == 'ignore'}}
                    	<div>————</div>
                    	{{else}}
                        <input type="text"  value="${accounts.account}" class="xa-account" name="account"/>
                        {{/if}}                       
                    </td>
                    <!--密码-->
                    <td class="nowrap">
                	{{if password == 'ignore'}}
                     	<div>————</div>
                      {{else}}                     
                       <input type="password" value="${accounts.password}" class="xa-account-password" name="password" />
                     {{/if}}
                    </td>                    
                </tr>
			{{/each}}
		</tbody>		
	</table>
	<div class="tc">
					<a href="javascript:void(0);" class="btn btn-primary xa-submit">保存</a>
				</div>
</script>
<script type="text/javascript">
	$(document).ready(function(){
		var $this=$(this),
		    id=$this.attr('data-id'),
		    
			$account=$('.xa-account'),
			$accountVal=$account.val(),
			
			$passWord=$('.xa-account-password'),
			$passwordVal=$passWord.val(),
			
			express_accounts=$accountVal+$passwordVal
		$('.xa-submit').click(function(){
			 W.getApi().call({
          method:'post',          
          app: 'mall2',
          resource:'sender_account',
          args:{
          	id:id,
          	express_accounts:express_accounts,
          },
	      success: function(data) {
	      	window.location.reload();
				
					},
					error: function(resp) {
						
					}
				});
		})
	})
</script>
{% endverbatim %}
{% endblock %}
